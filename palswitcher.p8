pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
 swap_mode = false
 flash_active = false
 flash_timer = 0
end

function _update()
 --button check
 if btnp(❎) then
 	flash_active = true
 	flash_timer = 0
 end
 
 --damage timer logic
 if flash_active then
		flash_timer+=1
		if flash_timer>=90 then
			flash_active = false
			flash_timer=0 
 	end
 end	
end

function _draw()
 cls()
	
	--draw some shapes
 rectfill(20,30,60,70,8)
 circfill(90,50,15,12)
 rectfill(30,80,70,100,10)

 --flash check
	swap_mode = flash_active and (flash_timer % 30 < 15)
	
 -- pal swap
 if swap_mode then
  pal(8,11)
  pal(12,8)
  pal(10,12)
 else
  pal()
 end

 -- show current mode
 print("x to flash pal swap",0,0)
 print("mode "..(swap_mode and "swap" or "normal"),0,8)                
	print("flash timer: "..flash_timer,0,15)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
